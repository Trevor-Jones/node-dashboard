<!DOCTYPE html>
<html>
	<head>
		<script src="table.js"></script>
		<script src="jquery-2.2.3.js"></script>
		<link href="c3.css" rel="stylesheet" type="text/css">
		<script src="d3.min.js" charset="utf-8"></script>
		<script src="c3.min.js"></script>
		<script src="interact.min.js"></script>
        <script src="socket.io.js"></script>
        <script src="graph.js"></script>
		<title>JSON Table</title>
		<link rel="stylesheet" href="styles.css">
	</head>
	<p>
		<div id="chart" class="draggable"></div>
        <script>
            var myJson;
            
            var socket = io.connect('http://localhost:3002');
            socket.on('json', function (data) {
                socket.emit('request', 'received');
                myJson = data.values;
                document.write(JSON.stringify(myJson));
            });
            
			var chart = c3.generate({
                bindto: '#chart',
				data: {
                    json: myJson,
                    keys: {
                        value: ['millis', 'velocity']
                    }
				}
			});

			setInterval(function () {
				chart.load({
                    json: myJson
				});
			}, 1000);
		</script>

		<script>
			interact('.draggable').draggable({
                inertia: false,         
                restrict: {             
                    endOnly: true,
                    elementRect: { top: 0, left: 0, bottom: 1, right: 1 }
                },
                autoScroll: true,     
                onmove: dragMoveListener,   
            });
		</script>
	</p>
</html>